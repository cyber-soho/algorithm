<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 1: Algorithm Analysis - Interactive Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            height: 400px;
            max-height: 500px;
        }
        .tab-active {
            border-bottom: 2px solid #ea580c; /* orange-600 */
            color: #ea580c;
            font-weight: 600;
        }
        .tab-inactive {
            color: #57534e; /* stone-600 */
        }
        .tab-inactive:hover {
            color: #292524; /* stone-800 */
        }
        /* Custom scrollbar for code blocks */
        .code-scroll::-webkit-scrollbar {
            height: 8px;
        }
        .code-scroll::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .code-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals with Terracotta Accents -->
    <!-- Application Structure Plan: 
         1. Dashboard/Home: Quick summary of the module, learning objectives, and stats.
         2. Theory Lab: Interactive graphs to explore Big-O complexity visually.
         3. Project Builder: Visual guide to the Git repository structure (Exercise 1).
         4. Log Analysis: Interactive regex explorer to understand the log parser (Exercise 2).
         5. Benchmark Simulator: A sorting algorithm race simulation to visualize performance differences (Exercise 3).
         Why: This structure breaks the linear document into task-based interactive modules, allowing students to "play" with the concepts (complexity, parsing, sorting) rather than just reading about them.
    -->
    <!-- Visualization & Content Choices:
         - Theory: Line Chart (Chart.js) to show growth rates. Goal: Compare classes. Interaction: Slider to change 'n'.
         - Benchmark: Bar Chart (Chart.js) to compare algorithms. Goal: Compare performance. Interaction: 'Run Benchmark' button.
         - Structure: Nested Flexbox/Grid for the file tree. Goal: Organize information.
         - Log Parser: Interactive HTML/JS text highlighting. Goal: Explain regex.
         - Confirmation: NO SVG or Mermaid used.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-stone-50 text-stone-800 antialiased min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="bg-white border-b border-stone-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold text-stone-900 tracking-tight">Algoritms<span class="text-orange-600">Lab</span>Module 01</span>
                </div>
                <div class="hidden sm:flex sm:space-x-8 h-full" id="nav-container">
                    <!-- Nav items injected by JS -->
                </div>
                <!-- Mobile menu button placeholder (simplified for single file) -->
                <div class="flex items-center sm:hidden">
                    <button id="mobile-menu-btn" class="text-stone-500 hover:text-stone-700 focus:outline-none">
                        Menu
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Nav -->
        <div id="mobile-nav" class="hidden sm:hidden bg-white border-b border-stone-200 pb-4">
            <!-- Mobile items injected by JS -->
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- View: Dashboard (Home) -->
        <div id="view-dashboard" class="view-section animate-fade-in">
            <header class="mb-10 text-center">
                <h1 class="text-4xl font-extrabold text-stone-900 mb-4">Introduction to Algorithm Analysis</h1>
                <p class="text-lg text-stone-600 max-w-3xl mx-auto">
                    Systems & Network Administration Focus. Master the theoretical foundations of algorithmic efficiency and apply them to practical infrastructure automation tasks.
                </p>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 hover:shadow-md transition-shadow">
                    <div class="text-orange-600 font-bold text-lg mb-2">Est. Time</div>
                    <div class="text-3xl font-bold text-stone-900">4 Hours</div>
                    <p class="text-sm text-stone-500 mt-2">Lecture: 1h | Lab: 2h | Work: 1h</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 hover:shadow-md transition-shadow">
                    <div class="text-orange-600 font-bold text-lg mb-2">Focus</div>
                    <div class="text-3xl font-bold text-stone-900">Complexity</div>
                    <p class="text-sm text-stone-500 mt-2">Big-O, Sorting, Log Parsing</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 hover:shadow-md transition-shadow">
                    <div class="text-orange-600 font-bold text-lg mb-2">Output</div>
                    <div class="text-3xl font-bold text-stone-900">Tools</div>
                    <p class="text-sm text-stone-500 mt-2">Log Analyzer & Benchmarker</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-xl shadow-sm border border-stone-200">
                    <h2 class="text-2xl font-bold text-stone-900 mb-6 border-b pb-2 border-stone-100">Learning Objectives</h2>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-sm font-bold mt-0.5">1</span>
                            <span class="ml-4 text-stone-600">Apply asymptotic notation (Big-O, &#937;, &#920;) to analyze efficiency.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-sm font-bold mt-0.5">2</span>
                            <span class="ml-4 text-stone-600">Distinguish between best-case, average-case, and worst-case behaviors.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-sm font-bold mt-0.5">3</span>
                            <span class="ml-4 text-stone-600">Structure a version-controlled repository for network automation.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-sm font-bold mt-0.5">4</span>
                            <span class="ml-4 text-stone-600">Implement a log analysis tool and benchmark sorting algorithms.</span>
                        </li>
                    </ul>
                </div>

                <div class="bg-stone-100 p-8 rounded-xl border border-stone-200">
                    <h2 class="text-2xl font-bold text-stone-900 mb-6 border-b pb-2 border-stone-200">Ethical Compliance</h2>
                    <div class="prose prose-stone text-sm">
                        <p class="mb-4"><strong>Crucial:</strong> The tools and techniques in this module mimic real-world system administration. You must acknowledge:</p>
                        <ul class="list-disc pl-5 space-y-2 mb-6">
                            <li>Work <strong>only</strong> on systems you own or have permission to access.</li>
                            <li>Unauthorized access is illegal (CFAA etc.).</li>
                            <li>Use isolated sandboxes to prevent system instability.</li>
                        </ul>
                        <div class="bg-white p-4 rounded border border-stone-300">
                            <p class="font-semibold text-stone-800">Policy: Open Tools</p>
                            <p class="text-stone-600 mt-1">While Git and Python are recommended, you are encouraged to explore alternatives. Critical thinking in tool selection is a key skill.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-12 text-center">
                <button onclick="switchView('theory')" class="px-8 py-3 bg-stone-900 text-white font-semibold rounded-lg hover:bg-stone-800 transition-colors shadow-lg transform hover:-translate-y-1">
                    Start Learning: Theory &rarr;
                </button>
            </div>
        </div>

        <!-- View: Theory (Complexity Analysis) -->
        <div id="view-theory" class="view-section hidden animate-fade-in">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-stone-900">Theoretical Foundation</h2>
                <p class="mt-2 text-stone-600">Understand how algorithms scale with input size. Use the interactive controls to visualize growth rates.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Controls & Legend -->
                <div class="lg:col-span-1 space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold text-lg mb-4">Complexity Classes</h3>
                        <p class="text-sm text-stone-500 mb-4">Click to highlight on chart.</p>
                        <div class="space-y-2" id="complexity-legend">
                            <!-- Injected by JS -->
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold text-lg mb-4">Definitions</h3>
                        <div class="space-y-4 text-sm">
                            <div>
                                <strong class="text-stone-900 block">Big-O (Upper Bound)</strong>
                                <span class="text-stone-600">Worst-case scenario. The algorithm will never be slower than this.</span>
                            </div>
                            <div>
                                <strong class="text-stone-900 block">Big-&#937; (Omega - Lower Bound)</strong>
                                <span class="text-stone-600">Best-case scenario. It will take at least this much time.</span>
                            </div>
                            <div>
                                <strong class="text-stone-900 block">Big-&#920; (Theta - Tight Bound)</strong>
                                <span class="text-stone-600">Upper and lower bounds coincide. Highly predictable.</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chart -->
                <div class="lg:col-span-2">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-lg">Growth Rate Visualization</h3>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm font-medium text-stone-600">Max Input (N):</span>
                                <input type="range" id="input-n-slider" min="10" max="100" value="50" class="w-32 h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer accent-orange-600">
                                <span id="input-n-val" class="text-sm font-bold text-orange-600 w-8">50</span>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="complexityChart"></canvas>
                        </div>
                        <p class="text-xs text-stone-400 mt-4 text-center">*Y-axis represents abstract "operations" count. Note how O(n¬≤) and O(2‚Åø) explode quickly.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- View: Project Structure (Exercise 1) -->
        <div id="view-structure" class="view-section hidden animate-fade-in">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-stone-900">Exercise 1: Project Structure</h2>
                <p class="mt-2 text-stone-600">A clean directory structure is vital for system administration. Explore the standard layout below.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-stone-900 p-6 rounded-xl text-stone-300 font-mono text-sm overflow-hidden shadow-lg">
                    <div class="mb-4 text-stone-500 border-b border-stone-800 pb-2 flex justify-between">
                        <span>~/network-automation-suite/</span>
                        <span class="text-xs">git branch: main</span>
                    </div>
                    <!-- Interactive File Tree -->
                    <ul class="space-y-1" id="file-tree">
                        <!-- Injected by JS -->
                    </ul>
                </div>

                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold text-lg text-stone-900 mb-2" id="file-detail-title">Select a file</h3>
                        <p class="text-stone-600" id="file-detail-desc">Hover over or click a file on the left to see its purpose and requirements.</p>
                        
                        <div id="file-detail-extra" class="mt-4 pt-4 border-t border-stone-100 hidden">
                            <div class="text-xs font-semibold text-orange-600 uppercase tracking-wide mb-1">Key Concept</div>
                            <p class="text-sm text-stone-700" id="file-detail-concept"></p>
                        </div>
                    </div>

                    <div class="bg-blue-50 p-6 rounded-xl border border-blue-100">
                        <h3 class="font-bold text-blue-900 mb-2">Git Quick Reference</h3>
                        <div class="space-y-2 text-sm text-blue-800 font-mono">
                            <p><span class="opacity-50">$</span> git init</p>
                            <p><span class="opacity-50">$</span> git add .</p>
                            <p><span class="opacity-50">$</span> git commit -m "Initial structure"</p>
                            <p><span class="opacity-50">$</span> git log --oneline</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- View: Log Analysis (Exercise 2) -->
        <div id="view-parser" class="view-section hidden animate-fade-in">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-stone-900">Exercise 2: Log Parsing Logic</h2>
                <p class="mt-2 text-stone-600">Analyzing raw server logs requires robust parsing logic. See how the parser decomposes a standard Apache log entry.</p>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 mb-8">
                <h3 class="font-bold text-lg mb-4">Combined Log Format Parser</h3>
                
                <!-- Interactive Parser -->
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-stone-700 mb-2">Raw Log Entry</label>
                        <div class="bg-stone-100 p-4 rounded-lg font-mono text-sm break-all text-stone-600 border border-stone-200">
                            192.168.1.105 - john [15/Oct/2024:13:55:36 -0700] "GET /api/users HTTP/1.1" 200 2326 "https://example.com/dashboard" "Mozilla/5.0"
                        </div>
                    </div>

                    <div class="flex justify-center">
                        <button id="parse-btn" class="bg-orange-600 text-white px-6 py-2 rounded-full font-semibold hover:bg-orange-700 transition-colors shadow-sm">
                            Run Parser &darr;
                        </button>
                    </div>

                    <div id="parsed-result" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Parsed fields injected here -->
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="font-bold text-lg mb-2">Algorithm Note: Efficiency</h3>
                    <p class="text-stone-600 text-sm mb-4">
                        We use a <strong>Generator Pattern</strong> for file reading.
                    </p>
                    <ul class="list-disc pl-5 text-sm text-stone-600 space-y-2">
                        <li><strong>O(n) Time:</strong> We touch every line once.</li>
                        <li><strong>O(1) Space:</strong> We only hold one line in memory at a time.</li>
                        <li>Essential for processing GBs of logs on limited RAM.</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                     <h3 class="font-bold text-lg mb-2">Regex Complexity</h3>
                     <p class="text-stone-600 text-sm">
                         The regex used matches specific groups. While Regex compilation is O(1), matching is generally linear to line length O(k). 
                         <br><br>
                         <code>r'^(\S+)\s...'</code>
                     </p>
                </div>
            </div>
        </div>

        <!-- View: Benchmarks (Exercise 3) -->
        <div id="view-benchmark" class="view-section hidden animate-fade-in">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-stone-900">Exercise 3: Sorting Benchmarks</h2>
                <p class="mt-2 text-stone-600">Compare sorting algorithms on server log data. Notice how O(n¬≤) algorithms fail at scale.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                <!-- Config Panel -->
                <div class="lg:col-span-1 space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold text-lg mb-4">Simulation Config</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-xs font-bold text-stone-500 uppercase tracking-wide mb-1">Dataset Size</label>
                                <select id="bench-size" class="w-full bg-stone-50 border border-stone-300 rounded-md py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500">
                                    <option value="1000">Small (1,000)</option>
                                    <option value="5000">Medium (5,000)</option>
                                    <option value="10000">Large (10,000)</option>
                                    <option value="50000">Extra Large (50,000)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-xs font-bold text-stone-500 uppercase tracking-wide mb-1">Input Pattern</label>
                                <select id="bench-pattern" class="w-full bg-stone-50 border border-stone-300 rounded-md py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500">
                                    <option value="random">Random Logs</option>
                                    <option value="sorted">Already Sorted</option>
                                    <option value="reverse">Reverse Sorted</option>
                                </select>
                            </div>

                            <button id="run-bench-btn" class="w-full py-2 bg-stone-900 text-white font-bold rounded-md hover:bg-stone-800 transition-colors">
                                Run Benchmark
                            </button>
                        </div>
                    </div>

                    <div class="bg-orange-50 p-4 rounded-xl border border-orange-100">
                        <h4 class="font-bold text-orange-800 text-sm mb-2">Quick Tips</h4>
                        <ul class="text-xs text-orange-800 space-y-2">
                            <li>&bull; <strong>Bubble Sort</strong> is disastrous on large random datasets.</li>
                            <li>&bull; <strong>Merge Sort</strong> is stable and consistent O(n log n).</li>
                            <li>&bull; <strong>Quick Sort</strong> is fast but can degrade on sorted data if pivot logic is poor.</li>
                        </ul>
                    </div>
                </div>

                <!-- Results Area -->
                <div class="lg:col-span-3">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 h-full flex flex-col">
                        <h3 class="font-bold text-lg mb-2">Performance Results (Simulated)</h3>
                        <p class="text-sm text-stone-500 mb-4">Execution time in seconds (lower is better)</p>
                        
                        <div class="chart-container flex-grow">
                            <canvas id="benchmarkChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analysis Table -->
            <div class="mt-8 bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden">
                 <div class="px-6 py-4 border-b border-stone-200 bg-stone-50">
                     <h3 class="font-bold text-stone-900">Complexity Reference Table</h3>
                 </div>
                 <div class="overflow-x-auto">
                     <table class="min-w-full text-sm text-left">
                         <thead class="bg-stone-100 text-stone-600 font-semibold">
                             <tr>
                                 <th class="px-6 py-3">Algorithm</th>
                                 <th class="px-6 py-3">Best Case</th>
                                 <th class="px-6 py-3">Average Case</th>
                                 <th class="px-6 py-3">Worst Case</th>
                                 <th class="px-6 py-3">Stable?</th>
                                 <th class="px-6 py-3">Admin Use Case</th>
                             </tr>
                         </thead>
                         <tbody class="divide-y divide-stone-200 text-stone-700">
                             <tr class="hover:bg-stone-50">
                                 <td class="px-6 py-3 font-medium">Bubble Sort</td>
                                 <td class="px-6 py-3 text-green-600">O(n)</td>
                                 <td class="px-6 py-3 text-red-600">O(n¬≤)</td>
                                 <td class="px-6 py-3 text-red-600">O(n¬≤)</td>
                                 <td class="px-6 py-3">Yes</td>
                                 <td class="px-6 py-3">Rarely used. Education only.</td>
                             </tr>
                             <tr class="hover:bg-stone-50">
                                 <td class="px-6 py-3 font-medium">Insertion Sort</td>
                                 <td class="px-6 py-3 text-green-600">O(n)</td>
                                 <td class="px-6 py-3 text-red-600">O(n¬≤)</td>
                                 <td class="px-6 py-3 text-red-600">O(n¬≤)</td>
                                 <td class="px-6 py-3">Yes</td>
                                 <td class="px-6 py-3">Small or nearly sorted lists.</td>
                             </tr>
                             <tr class="hover:bg-stone-50">
                                 <td class="px-6 py-3 font-medium">Merge Sort</td>
                                 <td class="px-6 py-3 text-orange-600">O(n log n)</td>
                                 <td class="px-6 py-3 text-orange-600">O(n log n)</td>
                                 <td class="px-6 py-3 text-orange-600">O(n log n)</td>
                                 <td class="px-6 py-3">Yes</td>
                                 <td class="px-6 py-3">General purpose, stable sorting.</td>
                             </tr>
                             <tr class="hover:bg-stone-50">
                                 <td class="px-6 py-3 font-medium">Quick Sort</td>
                                 <td class="px-6 py-3 text-orange-600">O(n log n)</td>
                                 <td class="px-6 py-3 text-orange-600">O(n log n)</td>
                                 <td class="px-6 py-3 text-red-600">O(n¬≤)</td>
                                 <td class="px-6 py-3">No</td>
                                 <td class="px-6 py-3">Fastest for in-memory general use.</td>
                             </tr>
                         </tbody>
                     </table>
                 </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-stone-100 border-t border-stone-200 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center text-sm text-stone-500">
            <p>Module 1: Introduction to Algorithm Analysis</p>
            <div class="mt-4 md:mt-0 flex space-x-6">
                <a href="#" class="hover:text-stone-900"></a>
                <a href="#" class="hover:text-stone-900"></a>
                <span>&copy; Cyber.Soho, 2026</span>
            </div>
        </div>
    </footer>

    <script>
        // --- State Management & Routing ---
        const state = {
            currentView: 'dashboard',
            benchmark: {
                size: 1000,
                pattern: 'random'
            }
        };

        const views = {
            dashboard: { title: 'Dashboard', id: 'view-dashboard' },
            theory: { title: 'Theory Lab', id: 'view-theory' },
            structure: { title: 'Project Structure', id: 'view-structure' },
            parser: { title: 'Log Parser', id: 'view-parser' },
            benchmark: { title: 'Benchmark Sim', id: 'view-benchmark' }
        };

        function initNav() {
            const container = document.getElementById('nav-container');
            const mobileContainer = document.getElementById('mobile-nav');
            
            Object.keys(views).forEach(key => {
                const view = views[key];
                
                // Desktop
                const link = document.createElement('button');
                link.textContent = view.title;
                link.className = `inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${state.currentView === key ? 'tab-active' : 'tab-inactive border-transparent hover:border-stone-300'}`;
                link.onclick = () => switchView(key);
                link.id = `nav-${key}`;
                container.appendChild(link);

                // Mobile
                const mLink = document.createElement('button');
                mLink.textContent = view.title;
                mLink.className = `block pl-3 pr-4 py-2 border-l-4 text-base font-medium w-full text-left ${state.currentView === key ? 'border-orange-500 text-orange-700 bg-orange-50' : 'border-transparent text-stone-600 hover:bg-stone-50 hover:border-stone-300'}`;
                mLink.onclick = () => { switchView(key); document.getElementById('mobile-nav').classList.add('hidden'); };
                mobileContainer.appendChild(mLink);
            });
        }

        function switchView(viewKey) {
            // Update state
            state.currentView = viewKey;

            // Update UI Content
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            document.getElementById(views[viewKey].id).classList.remove('hidden');

            // Update Nav Styles
            Object.keys(views).forEach(key => {
                const btn = document.getElementById(`nav-${key}`);
                if (key === viewKey) {
                    btn.className = 'inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors tab-active border-orange-600';
                } else {
                    btn.className = 'inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors tab-inactive border-transparent hover:border-stone-300';
                }
            });

            // Trigger animations or chart resizing
            if(viewKey === 'theory') updateComplexityChart();
            if(viewKey === 'benchmark') updateBenchmarkChart();
        }

        // --- Data & Logic: Theory Chart ---
        let complexityChart;
        const complexityData = {
            o1: [], on: [], ologn: [], on2: [], labels: []
        };

        function initComplexityChart() {
            const ctx = document.getElementById('complexityChart').getContext('2d');
            complexityChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        { label: 'O(1) Constant', data: [], borderColor: '#16a34a', borderWidth: 2, tension: 0.4 }, // green-600
                        { label: 'O(log n) Logarithmic', data: [], borderColor: '#2563eb', borderWidth: 2, tension: 0.4 }, // blue-600
                        { label: 'O(n) Linear', data: [], borderColor: '#ea580c', borderWidth: 2, tension: 0.4 }, // orange-600
                        { label: 'O(n¬≤) Quadratic', data: [], borderColor: '#dc2626', borderWidth: 2, tension: 0.4 } // red-600
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: { mode: 'index', intersect: false },
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Operations' } },
                        x: { title: { display: true, text: 'Input Size (n)' } }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: true }
                    }
                }
            });

            // Generate Legend dynamically
            const legendContainer = document.getElementById('complexity-legend');
            const items = [
                { l: 'O(1) Constant', d: 'Hash table lookups', c: 'bg-green-600' },
                { l: 'O(log n) Logarithmic', d: 'Binary search', c: 'bg-blue-600' },
                { l: 'O(n) Linear', d: 'Simple loop', c: 'bg-orange-600' },
                { l: 'O(n¬≤) Quadratic', d: 'Nested loops', c: 'bg-red-600' }
            ];
            
            items.forEach(item => {
                const div = document.createElement('div');
                div.className = "flex items-center p-2 rounded hover:bg-stone-50 cursor-pointer transition-colors";
                div.innerHTML = `
                    <span class="w-3 h-3 rounded-full ${item.c} mr-3"></span>
                    <div>
                        <div class="font-bold text-sm text-stone-800">${item.l}</div>
                        <div class="text-xs text-stone-500">${item.d}</div>
                    </div>
                `;
                legendContainer.appendChild(div);
            });

            calculateComplexityData(50);
        }

        function calculateComplexityData(maxN) {
            const labels = [];
            const d1 = [], dLog = [], dN = [], dN2 = [];
            
            // Limit points to keep chart clean
            const step = Math.max(1, Math.floor(maxN / 10));
            
            for(let i=1; i<=maxN; i+=step) {
                labels.push(i);
                d1.push(5); // Constant
                dLog.push(Math.log2(i) * 5); // Scale for visibility
                dN.push(i);
                dN2.push(Math.pow(i, 2) / 10); // Scale down for visibility
            }

            complexityChart.data.labels = labels;
            complexityChart.data.datasets[0].data = d1;
            complexityChart.data.datasets[1].data = dLog;
            complexityChart.data.datasets[2].data = dN;
            complexityChart.data.datasets[3].data = dN2;
            complexityChart.update();
        }

        function updateComplexityChart() {
            const val = document.getElementById('input-n-slider').value;
            document.getElementById('input-n-val').textContent = val;
            calculateComplexityData(parseInt(val));
        }

        // --- Data & Logic: File Tree ---
        const fileStructure = [
            { name: 'README.md', type: 'file', desc: 'Project overview and quick-start guide.', concept: 'Documentation First: Always explain what your project does.' },
            { name: '.gitignore', type: 'file', desc: 'Specifies files Git should not track (e.g., logs, secrets).', concept: 'Security & Hygiene: Keep your repository clean and safe.' },
            { name: 'src/', type: 'folder', children: [
                { name: 'log_analyzer/', type: 'folder', children: [
                    { name: 'parser.py', type: 'file', desc: 'Log parsing functionality using Regex.', concept: 'Modularity: Isolate logic into dedicated files.' },
                    { name: 'sorter.py', type: 'file', desc: 'Sorting algorithm implementations.', concept: 'Algorithmic Core: The heavy lifting happens here.' }
                ]}
            ]},
            { name: 'tests/', type: 'folder', children: [
                { name: 'test_log_analyzer.py', type: 'file', desc: 'Unit tests for the analyzer.', concept: 'Reliability: Tests ensure your code works as expected.' }
            ]},
            { name: 'data/', type: 'folder', children: [
                { name: 'sample_logs/', type: 'folder', desc: 'Sample server log files.', concept: 'Data separation: Code and Data should live apart.' }
            ]},
            { name: 'docs/', type: 'folder', children: [
                { name: 'complexity-analysis.md', type: 'file', desc: 'Documentation of algorithmic findings.', concept: 'Analysis: Documenting WHY you chose specific algorithms.' }
            ]}
        ];

        function renderFileTree(nodes, container, depth = 0) {
            nodes.forEach(node => {
                const li = document.createElement('li');
                li.className = "cursor-pointer hover:text-white transition-colors group";
                li.style.paddingLeft = `${depth * 1.5}rem`;
                
                const icon = node.type === 'folder' ? 'üìÅ' : 'üìÑ';
                li.innerHTML = `<span class="opacity-70 group-hover:opacity-100 mr-2">${icon}</span> ${node.name}`;
                
                if (node.type === 'file' || node.desc) {
                    li.onclick = (e) => {
                        e.stopPropagation();
                        showFileDetails(node);
                        document.querySelectorAll('#file-tree li').forEach(el => el.classList.remove('text-orange-400', 'font-bold'));
                        li.classList.add('text-orange-400', 'font-bold');
                    };
                }

                container.appendChild(li);

                if (node.children) {
                    const ul = document.createElement('ul');
                    ul.className = "border-l border-stone-700 ml-2";
                    renderFileTree(node.children, ul, depth + 1);
                    container.appendChild(ul);
                }
            });
        }

        function showFileDetails(node) {
            document.getElementById('file-detail-title').textContent = node.name;
            document.getElementById('file-detail-desc').textContent = node.desc || "Directory container.";
            
            const extra = document.getElementById('file-detail-extra');
            const concept = document.getElementById('file-detail-concept');
            
            if (node.concept) {
                extra.classList.remove('hidden');
                concept.textContent = node.concept;
            } else {
                extra.classList.add('hidden');
            }
        }

        // --- Data & Logic: Log Parser ---
        function runParser() {
            const raw = '192.168.1.105 - john [15/Oct/2024:13:55:36 -0700] "GET /api/users HTTP/1.1" 200 2326 "https://example.com/dashboard" "Mozilla/5.0"';
            const resultContainer = document.getElementById('parsed-result');
            resultContainer.innerHTML = '';
            resultContainer.classList.remove('hidden');

            const fields = [
                { label: 'IP Address', val: '192.168.1.105', color: 'bg-blue-100 text-blue-800' },
                { label: 'User', val: 'john', color: 'bg-purple-100 text-purple-800' },
                { label: 'Timestamp', val: '15/Oct/2024...', color: 'bg-yellow-100 text-yellow-800' },
                { label: 'Method', val: 'GET', color: 'bg-green-100 text-green-800' },
                { label: 'Resource', val: '/api/users', color: 'bg-green-100 text-green-800' },
                { label: 'Status', val: '200', color: 'bg-green-100 text-green-800' },
                { label: 'Size', val: '2326 bytes', color: 'bg-stone-100 text-stone-800' },
                { label: 'User Agent', val: 'Mozilla/5.0...', color: 'bg-stone-100 text-stone-600' },
            ];

            fields.forEach((f, index) => {
                const div = document.createElement('div');
                div.className = `p-3 rounded border border-stone-100 shadow-sm opacity-0 transform translate-y-2 transition-all duration-500 ${f.color}`;
                div.style.animationDelay = `${index * 100}ms`;
                div.innerHTML = `
                    <div class="text-xs font-bold uppercase tracking-wide opacity-70">${f.label}</div>
                    <div class="font-mono font-semibold truncate">${f.val}</div>
                `;
                resultContainer.appendChild(div);
                
                // Trigger animation
                setTimeout(() => {
                    div.classList.remove('opacity-0', 'translate-y-2');
                }, index * 100);
            });
        }

        // --- Data & Logic: Benchmark Simulator ---
        let benchmarkChart;
        
        function initBenchmarkChart() {
            const ctx = document.getElementById('benchmarkChart').getContext('2d');
            benchmarkChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Bubble', 'Insertion', 'Selection', 'Merge', 'Quick', 'Heap'],
                    datasets: [{
                        label: 'Execution Time (Seconds)',
                        data: [0,0,0,0,0,0],
                        backgroundColor: [
                            '#fca5a5', // Bubble (Red-300)
                            '#fdba74', // Insertion (Orange-300)
                            '#fdba74', // Selection (Orange-300)
                            '#86efac', // Merge (Green-300)
                            '#93c5fd', // Quick (Blue-300)
                            '#86efac', // Heap (Green-300)
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Seconds (Lower is Better)' } }
                    }
                }
            });
        }

        function runBenchmark() {
            const size = parseInt(document.getElementById('bench-size').value);
            const pattern = document.getElementById('bench-pattern').value;
            
            // Simulating realistic times based on complexity
            // Base unit: roughly 0.0000001 sec per operation for JS/Python loop
            const baseOpTime = 0.00000005; 
            
            // Algorithms
            const algos = ['Bubble', 'Insertion', 'Selection', 'Merge', 'Quick', 'Heap'];
            const results = [];

            algos.forEach(algo => {
                let operations = 0;
                
                // Complexity formulas simplified
                if (algo === 'Bubble' || algo === 'Selection') {
                    // O(n^2) always roughly
                    operations = Math.pow(size, 2);
                } else if (algo === 'Insertion') {
                    if (pattern === 'sorted') operations = size; // O(n) best case
                    else if (pattern === 'reverse') operations = Math.pow(size, 2); // Worst case
                    else operations = Math.pow(size, 2) / 4; // Average case
                } else if (algo === 'Merge' || algo === 'Heap') {
                    // O(n log n)
                    operations = size * Math.log2(size);
                } else if (algo === 'Quick') {
                    // O(n log n) usually, O(n^2) worst case
                    if (pattern === 'sorted' || pattern === 'reverse') {
                        // Naive quick sort hits O(n^2) on sorted data often, but let's assume optimized pivot for a mix
                        // Let's simulate a slight degradation
                         operations = size * Math.log2(size) * 1.5;
                    } else {
                        operations = size * Math.log2(size);
                    }
                }

                // Add some random noise/variance (¬±10%)
                const noise = 1 + (Math.random() * 0.2 - 0.1);
                let time = operations * baseOpTime * noise;
                
                // Cap very long times for display purposes (so bars don't break chart)
                if (time > 10) time = 10; 

                results.push(time);
            });

            // Update Chart
            benchmarkChart.data.datasets[0].data = results;
            benchmarkChart.update();
        }

        function updateBenchmarkChart() {
            // Just ensure it renders
            if(benchmarkChart) benchmarkChart.resize();
        }


        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            initNav();
            initComplexityChart();
            initBenchmarkChart();
            renderFileTree(fileStructure, document.getElementById('file-tree'));
            
            // Event Listeners
            document.getElementById('mobile-menu-btn').onclick = () => {
                document.getElementById('mobile-nav').classList.toggle('hidden');
            };
            document.getElementById('input-n-slider').addEventListener('input', updateComplexityChart);
            document.getElementById('parse-btn').addEventListener('click', runParser);
            document.getElementById('run-bench-btn').addEventListener('click', runBenchmark);

            // Default View
            switchView('dashboard');
        });

    </script>
</body>
</html>



