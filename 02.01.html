<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algorithms: Sorting & Data Organization | Interactive Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #fafaf9; /* Stone 50 */
            color: #44403c; /* Stone 700 */
        }

        h1, h2, h3, h4 {
            font-weight: 700;
            color: #292524; /* Stone 800 */
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Chart Container Styling - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f5f5f4;
        }
        ::-webkit-scrollbar-thumb {
            background: #a8a29e;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #78716c;
        }

        /* Card Hover Effects */
        .interactive-card {
            transition: all 0.3s ease;
        }
        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Packet Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-enter {
            animation: fadeIn 0.4s ease-out forwards;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals (Stone) with Burnt Orange and Teal accents for a calm, academic yet modern feel. -->
    <!-- Application Structure Plan: 
         1. Hero Section: Sets the stage with the "Library" analogy.
         2. The Sorting Lab: Interactive comparison of the 3 algorithms. User selects one to see details and update the Complexity Chart.
         3. Network Traffic Control: A simulation where users generate "Packets". The UI demonstrates sorting by priority in real-time.
         4. Priority Queue Scheduler: An "ER Triage" simulator. Users add patients, demonstrating the Heap property (Bubble Up).
         5. Synthesis: Summary and quiz to reinforce connections.
         Rationale: This linear but modular structure guides the learner from abstract theory (Sorting) to concrete application (Network) to advanced structures (Heaps), mirroring the report's pedagogy. -->
    <!-- Visualization & Content Choices:
         - Complexity Chart: Chart.js Line chart. Goal: Compare performance. Method: Dynamic updates based on active tab.
         - Packet Simulator: HTML/JS DOM manipulation. Goal: Visualize router logic. Method: Flexbox items that reorder.
         - Heap Visualizer: CSS Grid "Tree". Goal: Explain Binary Heap. Method: Visual blocks arranged in hierarchy.
         - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-stone-50 text-stone-800 antialiased">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-stone-100/90 backdrop-blur-md border-b border-stone-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-2">
                    <span class="text-2xl">‚ö°</span>
                    <span class="font-bold text-xl tracking-tight text-stone-900">Algo<span class="text-orange-600">Viz</span></span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="scrollToSection('sorting')" class="text-stone-600 hover:text-orange-600 font-medium transition-colors">Sorting Lab</button>
                    <button onclick="scrollToSection('network')" class="text-stone-600 hover:text-orange-600 font-medium transition-colors">Network Traffic</button>
                    <button onclick="scrollToSection('priority')" class="text-stone-600 hover:text-orange-600 font-medium transition-colors">Priority Queues</button>
                    <button onclick="scrollToSection('summary')" class="text-stone-600 hover:text-orange-600 font-medium transition-colors">Summary</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="bg-white border-b border-stone-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-24">
            <div class="text-center">
                <h1 class="text-4xl sm:text-5xl font-extrabold text-stone-900 tracking-tight mb-6">
                    The Invisible Engine of the <span class="text-orange-600">Digital World</span>
                </h1>
                <p class="max-w-2xl mx-auto text-xl text-stone-600 mb-8">
                    Every scroll, every search, and every video call relies on billions of rapid decisions. 
                    Explore the algorithms that organize chaos into order.
                </p>
                <div class="flex justify-center gap-4">
                    <button onclick="scrollToSection('sorting')" class="px-8 py-3 bg-stone-900 text-white font-semibold rounded-lg hover:bg-orange-600 transition-colors shadow-lg">
                        Start Exploring
                    </button>
                </div>
            </div>
            
            <!-- Analogy Card -->
            <div class="mt-12 max-w-3xl mx-auto bg-stone-50 rounded-xl p-6 border border-stone-200 shadow-sm flex flex-col sm:flex-row items-center gap-6">
                <div class="text-4xl">üìö</div>
                <div>
                    <h3 class="font-bold text-lg mb-2">Why Sorting Matters: The Library Analogy</h3>
                    <p class="text-stone-600 text-sm">
                        Imagine a library with millions of books thrown on the floor. Finding one takes hours. 
                        Sorted shelves make it take seconds. Google's data centers are just massive, digital libraries 
                        that need efficient sorting to survive.
                    </p>
                </div>
            </div>
        </div>
    </header>

    <!-- SECTION 1: THE SORTING LAB -->
    <section id="sorting" class="py-16 sm:py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mb-12">
            <h2 class="text-3xl font-bold mb-4">The Sorting Lab</h2>
            <p class="text-lg text-stone-600 max-w-3xl">
                Explore the three "Champions" of sorting. Each has unique strengths, weaknesses, and real-world applications. 
                Click on a card to analyze its performance mechanics.
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            <!-- Algorithm Selection Cards -->
            <div onclick="selectAlgo('quicksort')" id="card-quicksort" class="interactive-card cursor-pointer bg-white p-6 rounded-xl border-2 border-orange-500 shadow-md">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="text-xl font-bold">QuickSort</h3>
                    <span class="text-2xl">‚ö°</span>
                </div>
                <p class="text-sm text-stone-600 mb-4">The "Clever Divider". Uses a pivot to partition data recursively.</p>
                <div class="text-xs font-mono bg-stone-100 p-2 rounded text-stone-500">Avg: O(n log n)</div>
            </div>

            <div onclick="selectAlgo('mergesort')" id="card-mergesort" class="interactive-card cursor-pointer bg-white p-6 rounded-xl border border-stone-200 hover:border-orange-300">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="text-xl font-bold">MergeSort</h3>
                    <span class="text-2xl">üß©</span>
                </div>
                <p class="text-sm text-stone-600 mb-4">The "Organized Combiner". Divides and merges systematically.</p>
                <div class="text-xs font-mono bg-stone-100 p-2 rounded text-stone-500">Avg: O(n log n)</div>
            </div>

            <div onclick="selectAlgo('heapsort')" id="card-heapsort" class="interactive-card cursor-pointer bg-white p-6 rounded-xl border border-stone-200 hover:border-orange-300">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="text-xl font-bold">HeapSort</h3>
                    <span class="text-2xl">üèóÔ∏è</span>
                </div>
                <p class="text-sm text-stone-600 mb-4">The "Priority Master". Builds a structure to extract the max.</p>
                <div class="text-xs font-mono bg-stone-100 p-2 rounded text-stone-500">Avg: O(n log n)</div>
            </div>
        </div>

        <!-- Detail View & Chart -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 bg-white p-6 rounded-2xl border border-stone-200 shadow-sm">
            
            <!-- Dynamic Text Content -->
            <div id="algo-details" class="flex flex-col justify-center">
                <h3 id="detail-title" class="text-2xl font-bold mb-4 text-orange-600">QuickSort Analysis</h3>
                
                <div class="space-y-4">
                    <div class="bg-stone-50 p-4 rounded-lg border-l-4 border-orange-500">
                        <h4 class="font-bold text-sm uppercase text-stone-500 mb-1">Real-World Analogy</h4>
                        <p id="detail-analogy" class="text-stone-800">Sorting a deck of cards by picking one random card and throwing smaller ones to the left, larger ones to the right.</p>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-stone-50 p-3 rounded">
                            <span class="block text-xs text-stone-500 uppercase font-bold">Best Case</span>
                            <span id="detail-best" class="font-mono text-lg text-teal-600">O(n log n)</span>
                        </div>
                        <div class="bg-stone-50 p-3 rounded">
                            <span class="block text-xs text-stone-500 uppercase font-bold">Worst Case</span>
                            <span id="detail-worst" class="font-mono text-lg text-red-600">O(n¬≤)</span>
                        </div>
                        <div class="bg-stone-50 p-3 rounded">
                            <span class="block text-xs text-stone-500 uppercase font-bold">Space</span>
                            <span id="detail-space" class="font-mono text-lg">O(log n)</span>
                        </div>
                        <div class="bg-stone-50 p-3 rounded">
                            <span class="block text-xs text-stone-500 uppercase font-bold">Use Case</span>
                            <span id="detail-use" class="text-sm font-medium">General purpose, fastest average</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chart Container -->
            <div class="flex flex-col items-center justify-center bg-stone-50 rounded-xl p-4">
                <h4 class="text-sm font-bold text-stone-500 mb-2 w-full text-left">Time Complexity Growth</h4>
                <div class="chart-container">
                    <canvas id="complexityChart"></canvas>
                </div>
                <p class="text-xs text-stone-400 mt-2 text-center">Lower curve = Faster processing time</p>
            </div>
        </div>
    </section>

    <!-- SECTION 2: NETWORK TRAFFIC -->
    <section id="network" class="bg-stone-900 text-stone-100 py-16 sm:py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                
                <!-- Text Content -->
                <div>
                    <div class="inline-block px-3 py-1 bg-stone-800 rounded-full text-xs font-mono text-orange-400 mb-4 border border-stone-700">Real-World Application</div>
                    <h2 class="text-3xl font-bold mb-4 text-white">Network Traffic Control</h2>
                    <p class="text-stone-300 mb-6">
                        Routers are the "Air Traffic Controllers" of the internet. They receive billions of packets randomly but must send them out in a specific order to ensure 
                        <strong>Quality of Service (QoS)</strong>.
                    </p>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex items-start gap-3">
                            <div class="w-8 h-8 rounded bg-red-500/20 text-red-400 flex items-center justify-center font-bold">1</div>
                            <div>
                                <h4 class="font-bold text-white">Emergency / Real-Time</h4>
                                <p class="text-sm text-stone-400">Voice calls, Gaming (Low latency needed)</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div class="w-8 h-8 rounded bg-blue-500/20 text-blue-400 flex items-center justify-center font-bold">2</div>
                            <div>
                                <h4 class="font-bold text-white">Standard Traffic</h4>
                                <p class="text-sm text-stone-400">Web browsing, YouTube (Buffering allowed)</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div class="w-8 h-8 rounded bg-stone-500/20 text-stone-400 flex items-center justify-center font-bold">3</div>
                            <div>
                                <h4 class="font-bold text-white">Bulk / Background</h4>
                                <p class="text-sm text-stone-400">Email, File downloads, Updates</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Simulator -->
                <div class="bg-stone-800 p-6 rounded-2xl border border-stone-700 shadow-2xl">
                    <div class="flex justify-between items-center mb-6 border-b border-stone-700 pb-4">
                        <h3 class="font-mono font-bold text-orange-500">Router_Sim_v1.0</h3>
                        <div class="flex gap-2">
                            <span class="w-3 h-3 rounded-full bg-red-500"></span>
                            <span class="w-3 h-3 rounded-full bg-yellow-500"></span>
                            <span class="w-3 h-3 rounded-full bg-green-500"></span>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <button onclick="addPacket('Video Call', 'High')" class="bg-stone-700 hover:bg-stone-600 text-white p-3 rounded-lg text-sm font-medium transition flex items-center justify-center gap-2">
                            <span>üìπ</span> Add Video Packet
                        </button>
                        <button onclick="addPacket('Email', 'Low')" class="bg-stone-700 hover:bg-stone-600 text-white p-3 rounded-lg text-sm font-medium transition flex items-center justify-center gap-2">
                            <span>üìß</span> Add Email Packet
                        </button>
                        <button onclick="addPacket('Gaming', 'Critical')" class="bg-stone-700 hover:bg-stone-600 text-white p-3 rounded-lg text-sm font-medium transition flex items-center justify-center gap-2">
                            <span>üéÆ</span> Add Game Packet
                        </button>
                         <button onclick="processPacket()" class="bg-orange-600 hover:bg-orange-500 text-white p-3 rounded-lg text-sm font-medium transition flex items-center justify-center gap-2 shadow-lg shadow-orange-900/50">
                            <span>üöÄ</span> Transmit Next
                        </button>
                    </div>

                    <!-- Visual Queue -->
                    <div class="space-y-2">
                        <div class="flex justify-between text-xs text-stone-400 uppercase font-bold tracking-wider">
                            <span>Priority Queue (Sorted by Importance)</span>
                            <span id="queue-count">0 Packets</span>
                        </div>
                        <div id="packet-queue" class="h-64 bg-stone-900 rounded-lg p-2 overflow-y-auto space-y-2 border-inner border-stone-700 shadow-inner flex flex-col">
                            <!-- Packets inject here -->
                            <div class="text-center text-stone-600 py-10 italic" id="empty-state">
                                No traffic. Router idle.
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 text-xs text-stone-500 font-mono">
                        > Algorithm: MergeSort (Stable) <br>
                        > Criteria: Priority > Age
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 3: PRIORITY QUEUES -->
    <section id="priority" class="py-16 sm:py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold mb-4">Priority Queues & The Heap</h2>
            <p class="max-w-2xl mx-auto text-lg text-stone-600">
                How does an OS decide which app gets the CPU? How does an ER decide who sees the doctor? 
                They use a <strong>Binary Heap</strong> to ensure the highest priority item is always accessible in O(1) time.
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Theory Block -->
            <div class="bg-white p-8 rounded-2xl shadow-sm border border-stone-200">
                <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
                    <span>üè•</span> ER Triage Analogy
                </h3>
                <ul class="space-y-6">
                    <li class="flex gap-4">
                        <div class="flex-shrink-0 w-10 h-10 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center font-bold">1</div>
                        <div>
                            <h4 class="font-bold text-stone-800">The Problem</h4>
                            <p class="text-sm text-stone-600">Patients arrive randomly. A heart attack (Priority 1) must be seen before a minor cut (Priority 5), even if the cut arrived earlier.</p>
                        </div>
                    </li>
                    <li class="flex gap-4">
                        <div class="flex-shrink-0 w-10 h-10 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center font-bold">2</div>
                        <div>
                            <h4 class="font-bold text-stone-800">The Solution: Max-Heap</h4>
                            <p class="text-sm text-stone-600">A tree structure where the parent is always higher priority than its children. The "Root" is always the most critical task.</p>
                        </div>
                    </li>
                    <li class="flex gap-4">
                        <div class="flex-shrink-0 w-10 h-10 rounded-full bg-stone-100 text-stone-600 flex items-center justify-center font-bold">3</div>
                        <div>
                            <h4 class="font-bold text-stone-800">The "Bubble Up"</h4>
                            <p class="text-sm text-stone-600">When a new critical task arrives at the bottom, it swaps places with its less important parents until it reaches the top.</p>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Visualization Block -->
            <div class="bg-stone-100 p-8 rounded-2xl border border-stone-200">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold text-lg">Task Scheduler (Heap View)</h3>
                    <button onclick="resetHeap()" class="text-xs text-stone-500 hover:text-red-500 underline">Reset</button>
                </div>
                
                <!-- Controls -->
                <div class="flex gap-2 mb-6">
                    <input type="text" id="task-name" placeholder="Task Name" class="flex-1 p-2 rounded border border-stone-300 text-sm focus:outline-none focus:border-orange-500">
                    <select id="task-priority" class="p-2 rounded border border-stone-300 text-sm bg-white">
                        <option value="90">Critical (90)</option>
                        <option value="50">High (50)</option>
                        <option value="20">Normal (20)</option>
                        <option value="10">Low (10)</option>
                    </select>
                    <button onclick="addTask()" class="bg-stone-800 text-white px-4 py-2 rounded text-sm hover:bg-stone-700">Add</button>
                </div>

                <!-- Tree Visualization (Flex Grid) -->
                <div class="relative h-64 border-2 border-dashed border-stone-300 rounded-lg bg-white p-4 flex flex-col items-center justify-start overflow-hidden">
                    
                    <!-- Level 1 (Root) -->
                    <div id="heap-root" class="w-full flex justify-center mb-4 min-h-[50px]">
                        <!-- JS injects node here -->
                        <div class="text-stone-300 text-xs text-center mt-2 w-full">Heap Empty</div>
                    </div>

                    <!-- Level 2 -->
                    <div id="heap-l2" class="w-full flex justify-around px-8 mb-4 min-h-[50px]">
                        <!-- JS injects nodes here -->
                    </div>

                     <!-- Level 3 -->
                     <div id="heap-l3" class="w-full flex justify-between px-2 min-h-[50px]">
                        <!-- JS injects nodes here -->
                    </div>

                    <div class="absolute bottom-2 right-2 text-xs text-stone-400">
                        Max-Heap Property: Parent > Child
                    </div>
                </div>

                <div class="mt-4 flex justify-between">
                    <button onclick="extractMax()" class="w-full bg-orange-100 text-orange-700 py-2 rounded-lg font-bold hover:bg-orange-200 transition">
                        Extract Max (Execute Task)
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 4: SUMMARY & QUIZ -->
    <section id="summary" class="bg-white border-t border-stone-200 py-16">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold mb-8 text-center">Synthesis & Review</h2>
            
            <div class="bg-stone-50 p-6 rounded-xl border border-stone-200 mb-8">
                <h3 class="text-xl font-bold mb-4 text-stone-800">The Big Picture</h3>
                <p class="text-stone-600 mb-4">
                    1. <strong>Sorting Algorithms</strong> (Quick, Merge, Heap) organize chaotic data into usable structures.<br>
                    2. <strong>Network Systems</strong> use these algorithms to sort billions of packets based on rules.<br>
                    3. <strong>Priority Queues</strong> extend this concept to allocate scarce resources (CPU, Doctors) based on importance.
                </p>
                <p class="text-sm font-bold text-orange-600">
                    Without these unseen champions, the internet would freeze, and your computer would crash.
                </p>
            </div>

            <!-- Simple Interactive Quiz -->
            <div class="space-y-4">
                <h4 class="font-bold text-lg">Quick Check</h4>
                
                <div class="quiz-item border border-stone-200 rounded-lg p-4 cursor-pointer hover:bg-stone-50 transition" onclick="toggleAnswer(this)">
                    <div class="flex justify-between items-center">
                        <span class="font-medium">Which algorithm is best for memory-constrained environments?</span>
                        <span class="text-stone-400">‚ñº</span>
                    </div>
                    <div class="hidden mt-3 text-sm text-stone-600 pl-4 border-l-2 border-orange-500">
                        <strong>HeapSort.</strong> It has a Space Complexity of O(1), meaning it sorts "in-place" without needing extra memory arrays like MergeSort.
                    </div>
                </div>

                <div class="quiz-item border border-stone-200 rounded-lg p-4 cursor-pointer hover:bg-stone-50 transition" onclick="toggleAnswer(this)">
                    <div class="flex justify-between items-center">
                        <span class="font-medium">Why do routers prioritize some packets over others?</span>
                        <span class="text-stone-400">‚ñº</span>
                    </div>
                    <div class="hidden mt-3 text-sm text-stone-600 pl-4 border-l-2 border-orange-500">
                        To maintain <strong>Quality of Service (QoS)</strong>. Real-time apps like Zoom need low latency, while emails can wait a few milliseconds without the user noticing.
                    </div>
                </div>

                <div class="quiz-item border border-stone-200 rounded-lg p-4 cursor-pointer hover:bg-stone-50 transition" onclick="toggleAnswer(this)">
                    <div class="flex justify-between items-center">
                        <span class="font-medium">In a Max-Heap, where is the highest priority item?</span>
                        <span class="text-stone-400">‚ñº</span>
                    </div>
                    <div class="hidden mt-3 text-sm text-stone-600 pl-4 border-l-2 border-orange-500">
                        At the <strong>Root</strong> (the top). This allows "Peeking" at the most important task in O(1) constant time.
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-stone-900 text-stone-400 py-8 text-center text-sm">
        <p>¬© 2026 Basic Sorting & Data Organization</p>
        <p class="mt-2">Created for interactive learning.</p>
    </footer>

    <!-- JavaScript Implementation -->
    <script>
        // --- 1. SMOOTH SCROLLING & NAVIGATION ---
        function scrollToSection(id) {
            const element = document.getElementById(id);
            element.scrollIntoView({ behavior: 'smooth' });
        }

        // --- 2. SORTING MODULE LOGIC ---
        
        // Data for cards
        const algoData = {
            quicksort: {
                title: "QuickSort: The Clever Divider",
                analogy: "Sorting a deck of cards by picking one card (pivot) and throwing smaller ones to the left pile, larger ones to the right pile, then repeating for each pile.",
                best: "O(n log n)",
                worst: "O(n¬≤) (Poor pivot)",
                space: "O(log n)",
                use: "General purpose, fastest average performance.",
                color: "border-orange-500"
            },
            mergesort: {
                title: "MergeSort: The Organized Combiner",
                analogy: "Splitting a massive filing cabinet into single drawers, sorting each drawer perfectly, then merging two drawers at a time maintaining order.",
                best: "O(n log n)",
                worst: "O(n log n)",
                space: "O(n) (Heavy memory)",
                use: "Stable sort, predictable performance, large datasets.",
                color: "border-blue-500"
            },
            heapsort: {
                title: "HeapSort: The Priority Master",
                analogy: "An emergency room line where patients are organized in a tree structure. The most critical patient is always moved to the front instantly.",
                best: "O(n log n)",
                worst: "O(n log n)",
                space: "O(1) (In-place)",
                use: "Memory constrained systems, embedded devices.",
                color: "border-purple-500"
            }
        };

        // Initialize Chart
        const ctx = document.getElementById('complexityChart').getContext('2d');
        
        // Generate data points for chart
        const labels = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100];
        const nLogN = labels.map(n => n * Math.log2(n));
        const nSquared = labels.map(n => n * n);

        let complexityChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    {
                        label: 'O(n log n) - Average',
                        data: nLogN,
                        borderColor: '#ea580c', // Orange 600
                        backgroundColor: 'rgba(234, 88, 12, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: false
                    },
                    {
                        label: 'O(n¬≤) - Worst Case',
                        data: nSquared,
                        borderColor: '#dc2626', // Red 600
                        borderWidth: 2,
                        borderDash: [5, 5],
                        tension: 0.4,
                        fill: false,
                        hidden: false // Initial state
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Operations' }
                    },
                    x: {
                        title: { display: true, text: 'Elements (n)' }
                    }
                }
            }
        });

        function selectAlgo(algoKey) {
            // Update UI Styling
            document.querySelectorAll('.interactive-card').forEach(c => {
                c.classList.remove('border-2', 'border-orange-500', 'border-blue-500', 'border-purple-500');
                c.classList.add('border-stone-200');
            });
            const activeCard = document.getElementById(`card-${algoKey}`);
            const data = algoData[algoKey];
            
            // Apply specific highlight color
            activeCard.classList.remove('border-stone-200');
            activeCard.classList.add('border-2');
            if(algoKey === 'quicksort') activeCard.classList.add('border-orange-500');
            if(algoKey === 'mergesort') activeCard.classList.add('border-blue-500');
            if(algoKey === 'heapsort') activeCard.classList.add('border-purple-500');

            // Update Details Text
            document.getElementById('detail-title').innerText = data.title;
            document.getElementById('detail-title').className = `text-2xl font-bold mb-4 ${algoKey === 'quicksort' ? 'text-orange-600' : algoKey === 'mergesort' ? 'text-blue-600' : 'text-purple-600'}`;
            document.getElementById('detail-analogy').innerText = data.analogy;
            document.getElementById('detail-best').innerText = data.best;
            document.getElementById('detail-worst').innerText = data.worst;
            document.getElementById('detail-space').innerText = data.space;
            document.getElementById('detail-use').innerText = data.use;

            // Update Chart Visibility based on algo
            if (algoKey === 'quicksort') {
                complexityChart.data.datasets[1].hidden = false; // Show Worst Case
                complexityChart.data.datasets[1].label = "O(n¬≤) - QuickSort Worst Case";
            } else {
                complexityChart.data.datasets[1].hidden = true; // Hide Worst Case (Merge/Heap are consistent)
            }
            complexityChart.update();
        }

        // --- 3. NETWORK SIMULATOR LOGIC ---

        const packetQueue = [];
        const packetContainer = document.getElementById('packet-queue');
        const queueCount = document.getElementById('queue-count');

        // Priority Mapping: Critical = 3, High = 2, Normal = 1, Low = 0
        const priorityMap = {
            'Critical': 3,
            'High': 2,
            'Normal': 1,
            'Low': 0
        };

        const colorMap = {
            'Critical': 'bg-red-500',
            'High': 'bg-orange-500',
            'Normal': 'bg-blue-500',
            'Low': 'bg-stone-500'
        };

        function addPacket(type, priority) {
            // Create Packet Object
            const packet = {
                id: Date.now(),
                type: type,
                priorityLabel: priority,
                priorityValue: priorityMap[priority],
                age: Date.now() // For stability if needed, simplified here
            };

            // Add to logic queue
            packetQueue.push(packet);
            
            // Sort Queue: Higher priority first
            packetQueue.sort((a, b) => b.priorityValue - a.priorityValue);

            renderQueue();
        }

        function processPacket() {
            if (packetQueue.length === 0) return;
            
            // Remove first element (Highest Priority)
            const sentPacket = packetQueue.shift();
            renderQueue();

            // Visual feedback could be added here (toast notification)
            console.log("Transmitted:", sentPacket.type);
        }

        function renderQueue() {
            packetContainer.innerHTML = '';
            queueCount.innerText = `${packetQueue.length} Packets`;

            if (packetQueue.length === 0) {
                packetContainer.innerHTML = '<div class="text-center text-stone-600 py-10 italic">No traffic. Router idle.</div>';
                return;
            }

            packetQueue.forEach(pkt => {
                const div = document.createElement('div');
                div.className = `p-3 rounded flex justify-between items-center text-white animate-enter ${colorMap[pkt.priorityLabel]}`;
                div.innerHTML = `
                    <div class="flex items-center gap-2">
                        <span class="font-bold text-sm">${pkt.type}</span>
                        <span class="text-xs opacity-75">(${pkt.priorityLabel})</span>
                    </div>
                    <div class="text-xs opacity-75 font-mono">ID:${pkt.id.toString().slice(-4)}</div>
                `;
                packetContainer.appendChild(div);
            });
        }

        // --- 4. HEAP VISUALIZER LOGIC (Simplified Tree) ---
        
        // Simple array based max heap
        let heap = [];

        function addTask() {
            const nameInput = document.getElementById('task-name');
            const priorityInput = document.getElementById('task-priority');
            
            const name = nameInput.value || "Task";
            const priority = parseInt(priorityInput.value);

            const node = { name, priority, id: Date.now() };
            
            // Insert at end
            heap.push(node);
            bubbleUp(heap.length - 1);
            
            renderHeap();
            nameInput.value = "";
        }

        function bubbleUp(index) {
            while (index > 0) {
                let parentIndex = Math.floor((index - 1) / 2);
                if (heap[parentIndex].priority < heap[index].priority) {
                    // Swap
                    [heap[parentIndex], heap[index]] = [heap[index], heap[parentIndex]];
                    index = parentIndex;
                } else {
                    break;
                }
            }
        }

        function extractMax() {
            if (heap.length === 0) return;
            
            // Move last to root
            const max = heap[0];
            const end = heap.pop();
            
            if (heap.length > 0) {
                heap[0] = end;
                bubbleDown(0);
            }
            
            renderHeap();
            // Could alert or show completed task
        }

        function bubbleDown(index) {
            const length = heap.length;
            const element = heap[index];
            
            while(true) {
                let leftChildIdx = 2 * index + 1;
                let rightChildIdx = 2 * index + 2;
                let swap = null;

                if (leftChildIdx < length) {
                    if (heap[leftChildIdx].priority > element.priority) {
                        swap = leftChildIdx;
                    }
                }

                if (rightChildIdx < length) {
                    if (
                        (swap === null && heap[rightChildIdx].priority > element.priority) ||
                        (swap !== null && heap[rightChildIdx].priority > heap[leftChildIdx].priority)
                    ) {
                        swap = rightChildIdx;
                    }
                }

                if (swap === null) break;

                [heap[index], heap[swap]] = [heap[swap], heap[index]];
                index = swap;
            }
        }

        function resetHeap() {
            heap = [];
            renderHeap();
        }

        function renderHeap() {
            const r = document.getElementById('heap-root');
            const l2 = document.getElementById('heap-l2');
            const l3 = document.getElementById('heap-l3');
            
            r.innerHTML = '';
            l2.innerHTML = '';
            l3.innerHTML = '';

            if (heap.length === 0) {
                r.innerHTML = '<div class="text-stone-300 text-xs text-center mt-2 w-full">Heap Empty</div>';
                return;
            }

            // Create Node Element Helper
            const createNode = (node, size='normal') => {
                const d = document.createElement('div');
                const sizeClass = size === 'small' ? 'w-16 h-16 text-[10px]' : 'w-20 h-20 text-xs';
                const colorClass = node.priority >= 90 ? 'bg-red-100 border-red-500 text-red-800' :
                                   node.priority >= 50 ? 'bg-orange-100 border-orange-500 text-orange-800' :
                                   'bg-blue-50 border-blue-400 text-blue-800';
                
                d.className = `${sizeClass} rounded-full border-2 flex flex-col items-center justify-center shadow-sm animate-enter ${colorClass}`;
                d.innerHTML = `<span class="font-bold block overflow-hidden text-ellipsis w-full text-center px-1">${node.name}</span><span>${node.priority}</span>`;
                return d;
            };

            // Render Root
            if (heap[0]) r.appendChild(createNode(heap[0]));

            // Render Level 2 (Indices 1, 2)
            if (heap[1]) l2.appendChild(createNode(heap[1]));
            if (heap[2]) l2.appendChild(createNode(heap[2]));

            // Render Level 3 (Indices 3, 4, 5, 6)
            for (let i = 3; i <= 6; i++) {
                if (heap[i]) l3.appendChild(createNode(heap[i], 'small'));
            }
        }

        // --- 5. QUIZ LOGIC ---
        function toggleAnswer(element) {
            const answer = element.querySelector('div:last-child');
            const arrow = element.querySelector('span:last-child');
            if (answer.classList.contains('hidden')) {
                answer.classList.remove('hidden');
                arrow.style.transform = 'rotate(180deg)';
            } else {
                answer.classList.add('hidden');
                arrow.style.transform = 'rotate(0deg)';
            }
        }

        // Initialize with QuickSort selected
        selectAlgo('quicksort');

    </script>
</body>
</html>




